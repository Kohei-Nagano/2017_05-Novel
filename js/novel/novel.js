var MAIN_SCENARIO = [
      {com:"BG", val:"url(image/bg/BG003.png)"}
    , {com:"S",  val:"ここはおつきみ山。<br>地理的には、カントー地方のニビシティとハナダシティの間に位置するところにある山だ。"}
    , {com:"S",  val:"この山には言い伝えがあり、<br>"}
    , {com:"BG", val:"url(image/bg/BG004.png)"}
    , {com:"S",  val:"『山の洞窟一室にて、<br>　そこで満月の月の光を浴びた石は輝きだし<br>　それは「月の石」となるであろう』<br>"}
    , {com:"BG", val:"url(image/bg/BG003.png)"}
    , {com:"S",  val:"というものだ。<br>"}
    , {com:"S",  val:"この話を聞きつけたピッピは、<br>月の石を手に入れるべくおつきみ山に探索しに行くのであった。<br>"}
    , {com:"PE",  val:""}
    , {com:"S",  val:"吾輩はピッピである。<br>ニックネームはまだない。"}
    , {com:"S",  val:"どこで生まれたか…<br>まあ、この辺はいいとしよう。"}
    , {com:"S",  val:"吾輩といえば、第六世代になってタイプがノーマルからフェアリーへ変更されたポケモンの一匹である。"}
    , {com:"S",  val:"隠れ特性の「フレンドガード」と進化前のポケモンにのみ許される「進化のきせき」を組み合わせた耐久戦法で、"}
    , {com:"S",  val:"ダブルバトルやトリプルバトルに<br>それなりに出番があった。"}
    , {com:"S",  val:"出番があった。<br>そう、これは過去形なのだ。"}
    , {com:"S",  val:"今の時代トリプルバトルの文化は消え、めっきり吾輩の出番は減ってしまったのだ。"}
    , {com:"S",  val:"ダブルバトルはまだあるとしても、吾輩をわざわざ出すまでもないのだ。"}
    , {com:"S",  val:"バトルロイヤル？そんなもの知らぬ。"}
    , {com:"S",  val:"………"}
    , {com:"S",  val:"まぁ、時代の流れに文句を言っても意味はないな。<br>ここは、吾輩自らが時代の流れに追いつくべきなのだ。"}
    , {com:"S",  val:"幸い、ピクシーになれば割と出番が多いらしいな。"}
    , {com:"S",  val:"天然とマジックガード。<br>メロメロボディは…、まぁいいとしよう。"}
    , {com:"S",  val:"ムーンフォースにコメットパンチ、その他もろもろの準備は大丈夫そうだな。"}
    , {com:"S",  val:"なんたって、進化したらもとには戻れないのだからな。"}
    , {com:"S",  val:"…"}
    , {com:"S",  val:"よし、では月の石探索に行くとしよう。"}
    , {com:"PD",  val:""}
    , {com:"S",  val:"………"}
    , {com:"S",  val:"……"}
    , {com:"S",  val:"…"}
    , {com:"BG", val:"url(image/bg/BG005.png)"}
    , {com:"PE",  val:""}
    , {com:"S",  val:"結構奥に来てみたはいいが、なかなか見つからないな"}
    , {com:"SE",  val:"#gastly"}
    , {com:"S",  val:"キシャァァァァッァァー"}
    , {com:"S",  val:"この鳴き声はゴースか？"}
    , {com:"S",  val:"おつきみ山にゴースは生息していただろうか？"}
    , {com:"S",  val:"まぁいい。<br>この際ゴースには、吾輩の強化の為の踏み台になってもらおう"}
    , {com:"PD",  val:""}
    , {com:"E",  val:""}
];
var NORMAL_SCENARIO = [
      {com:"BG", val:"url(image/bg/BG005.png)"}
    , {com:"PE",  val:""}
    , {com:"S",  val:"ッフ、猪口才な<br>（ﾑｷｯ）"}
    , {com:"S",  val:"それにしても、身体の内から物凄いパワーが沸き上がるッピな<br>（ﾑｷｯ）"}
    , {com:"S",  val:"うっ…、<br>この力、抑えきれないッピ<br>（ﾑｷｯ）"}
    , {com:"S",  val:"このままだと身体が爆発するッピ<br>（ﾑｷｯﾑｷｯ）"}
    , {com:"S",  val:"ギャアアアアアアアアアアアアアアアアアアアアアアアアアアアアアア<br>（ﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷﾑｷ）"}
    , {com:"PD",  val:""}
    , {com:"S",  val:"………"}
    , {com:"S",  val:"……"}
    , {com:"S",  val:"…"}
    , {com:"BG", val:"url(image/bg/BG006.jpg)"}
    , {com:"SE",  val:"#mewtwo"}
    , {com:"S",  val:"NORMAL END<br>ギエピー爆誕"}
    , {com:"E",  val:""}
];
var TRUE_SCENARIO = [
      {com:"BG", val:"url(image/bg/BG004.png)"}
    , {com:"PE",  val:"url(image/chara/pippi_01.png)"}
    , {com:"S",  val:"ふぅ………、<br>ゴース共はあらかた片付いたみたいだな。"}
    , {com:"S",  val:"それにしたって、どうしておつきみ山にゴースが…。"}
    , {com:"S",  val:"…"}
    , {com:"S",  val:"まぁ、過ぎたことはいいとしよう。"}
    , {com:"S",  val:"それはさておき、戦いながら洞窟の奥の方に来てみたわけだが、"}
    , {com:"S",  val:"ここは天井が空いていて、月の光が射しているみたいだな。"}
    , {com:"S",  val:"月の光…<br>ということは！"}
    , {com:"IE",  val:"url(image/chara/stone1.png)"}
    , {com:"S",  val:"あったぞ！月の石が！"}
    , {com:"S",  val:"これで吾輩もピクシーになれるんだな。"}
    , {com:"S",  val:"くぅ疲"}
    , {com:"S",  val:"待っていろよ、第7世代の戦場よ"}
    , {com:"S",  val:"吾輩がフェアリータイプのトップになってみせるのじゃ"}
    , {com:"ID",  val:"…"}
    , {com:"PD",  val:"…"}
    , {com:"S",  val:"………"}
    , {com:"S",  val:"……"}
    , {com:"S",  val:"…"}
    , {com:"SE",  val:"#clefable"}
    , {com:"S",  val:"TRUE END<br>積み・補助ポケキラー「ピクシー」"}
];
var BAD_SCENARIO = [
      {com:"BG", val:"url(image/bg/BG004.png)"}
    , {com:"PE",  val:"url(image/chara/pippi_01.png)"}
    , {com:"S",  val:"フハハハハハッ！<br>吾輩にかかればゴースの群れなぞ雑魚にすぎぬのだ"}
    , {com:"S",  val:"倒せば倒すほど「とくこう」がみなぎっていったぞ"}
    , {com:"S",  val:"そこはゴースどもに感謝せんとな"}
    , {com:"IE",  val:"url(image/chara/stone1.png)"}
    , {com:"S",  val:""}
    , {com:"S",  val:"おお、とうとう見つけたぞ月の石"}
    , {com:"S",  val:"これを使えば、吾輩もピクシーになって戦場で名を轟かせることになるのだな"}
    , {com:"S",  val:"フハハハハハッ！！<br>よいぞ・・・よいぞ・・・！！"}
    , {com:"S",  val:"月の石よ！<br>吾輩に力をっ！！！"}
    , {com:"IE",  val:"url(image/chara/stone2.png)"}
    , {com:"S",  val:"………"}
    , {com:"S",  val:"……"}
    , {com:"PE",  val:"url(image/chara/gengar.png)"}
    , {com:"S",  val:"…"}
    , {com:"SE",  val:"#genger"}
    , {com:"ID",  val:"…"}
    , {com:"PD",  val:"…"}
    , {com:"S",  val:"BAD END<br>ピクシーとゲンガー２"}
    , {com:"E",  val:""}
];
var DEAD_SCENARIO = [
      {com:"BG", val:"url(image/bg/BG005.png)"}
    , {com:"PE",  val:""}
    , {com:"S",  val:"キヒヒッ<br>"}
    , {com:"S",  val:"ピッピ一匹如きで俺たちに勝てるわけないんだよなぁ"}
    , {com:"S",  val:"ましてや、ノーマルタイプからフェアリータイプに変わっている状態だからな"}
    , {com:"S",  val:"タイプ相性が変わって、俺たちゴーストタイプの技も当たっちまうようになってるからなぁ"}
    , {com:"S",  val:"キヒヒッ"}
    , {com:"S",  val:"さて、これからどうしたものかな"}
    , {com:"IE",  val:"url(image/chara/stone1.png)"}
    , {com:"S",  val:""}
    , {com:"S",  val:"あそこにあるのは月の石か"}
    , {com:"S",  val:"月の石、ピッピ………"}
    , {com:"S",  val:"キヒヒッ、こいつぁいいこと思いついた"}
    , {com:"S",  val:"このピッピには俺様のエサになってもらうぜええええええ"}
    , {com:"BG", val:"url(image/bg/BG004.png)"}
    , {com:"ID",  val:""}
    , {com:"PD",  val:""}
    , {com:"S",  val:"………"}
    , {com:"S",  val:"……"}
    , {com:"S",  val:"…"}
    , {com:"SE",  val:"#genger"}
    , {com:"BG", val:"url(image/bg/BG007.jpg)"}
    , {com:"S",  val:"DEAD END<br>ピクシーとゲンガー１"}
    , {com:"E",  val:""}
];

var SCENARIO = {
    MAIN    : 0,
    TRUE    : 1,
    NORMAL  : 2,
    BAD     : 3,
    DEAD    : 4,
};

var Novel = function() {    
        this.max = 0;
        this.cursor = 0;
        this.game = new Game(this);
    }

// 初期化
Novel.prototype.init = function(){
        this.setMainScenario();
        this.play();
    }

// 読み込み
Novel.prototype.play = function(){
        if(this.cursor >= this.max){
            return(false);
        }

        switch(this.scenario){
            case SCENARIO.MAIN:     this.mainScenario();    break;
            case SCENARIO.NORMAL:   this.normalScenario();  break;
            case SCENARIO.TRUE:     this.trueScenario();    break;
            case SCENARIO.BAD:      this.badScenario();     break;
            case SCENARIO.DEAD:     this.deadScenario();    break;
            default:                alert("default");       break;
        }
    }

// メインシナリオセット
Novel.prototype.setMainScenario = function(){
    this.max = MAIN_SCENARIO.length;
    this.scenario = SCENARIO.MAIN;
    $("#serif").html("");
    this.enableMainScreen();
}
// ノーマルシナリオセット
Novel.prototype.setNormalScenario = function(){
    this.max = NORMAL_SCENARIO.length;
    this.scenario = SCENARIO.NORMAL;
    $("#serif").html("");
    this.enableMainScreen();
}
// トゥルーシナリオセット
Novel.prototype.setTrueScenario = function(){
    this.max = TRUE_SCENARIO.length;
    this.scenario = SCENARIO.TRUE;
    $("#serif").html("");
    this.enableMainScreen();
}
// バッドシナリオセット
Novel.prototype.setBadScenario = function(){
    this.max = BAD_SCENARIO.length;
    this.scenario = SCENARIO.BAD;
    $("#serif").html("");
    this.enableMainScreen();
}
// デッドシナリオセット
Novel.prototype.setDeadScenario = function(){
    this.max = DEAD_SCENARIO.length;
    this.scenario = SCENARIO.DEAD;
    $("#serif").html("");
    this.enableMainScreen();
}
// メインスクリーン表示
Novel.prototype.enableMainScreen = function(){
    $("#mainScreen").css("width", "800px");
    $("#mainScreen").css("height", "600px");
    $("#gameScreen").hide();
    $("#mainScreen").show();    
}
// メインスクリーン非表示
Novel.prototype.disableMainScreen = function(){
    $("#gameScreen").css("width", "800px");
    $("#gameScreen").css("height", "600px");
    $("#mainScreen").hide();
    $("#gameScreen").show();
}

Novel.prototype.mainScenario = function(){
    switch(MAIN_SCENARIO[this.cursor].com){
        // セリフ再生
        case "S":
            $("#serif").html(MAIN_SCENARIO[this.cursor].val);
            this.cursor++;
            break;
        // キャラ表示
        case "PE":
            $("#serif").css("width", "450px");
            $("#chara").show();
            this.cursor++;
            this.play();
            break;
        // キャラ非表示
        case "PD":
            $("#serif").css("width", "600px");
            $("#chara").hide();
            this.cursor++;
            this.play();
            break;
        // 背景変更
        case "BG":
            $("#mainScreen").css("background-image", MAIN_SCENARIO[this.cursor].val);
            this.cursor++;
            this.play();
            break;
        // SE再生
        case "SE":
            var au = $(MAIN_SCENARIO[this.cursor].val).get(0);
            au.play();
            this.cursor++;
            this.play();
            break;
        //
        case "E":
            this.cursor = 0;
            this.disableMainScreen();
            // ゲーム開始
            this.game.start();
            
        default:
            break;
    }
}

Novel.prototype.normalScenario = function(){
    switch(NORMAL_SCENARIO[this.cursor].com){
    // セリフ再生
    case "S":
            $("#serif").html(NORMAL_SCENARIO[this.cursor].val);
            this.cursor++;
            break;
    // キャラ表示
    case "PE":
        $("#serif").css("width", "450px");
        $("#chara").show();
        this.cursor++;
        this.play();
        break;
    // キャラ非表示
    case "PD":
        $("#serif").css("width", "600px");
        $("#chara").hide();
        this.cursor++;
        this.play();
        break;
    // 背景変更
    case "BG":
            $("#mainScreen").css("background-image", NORMAL_SCENARIO[this.cursor].val);
            this.cursor++;
            this.play();
            break;
    // SE再生
    case "SE":
        var au = $(NORMAL_SCENARIO[this.cursor].val).get(0);
        au.play();
        this.cursor++;
        this.play();
        break;
    // 終了
    case "E":
            break;
    default:
            break;
    }

}

Novel.prototype.trueScenario = function(){
    switch(TRUE_SCENARIO[this.cursor].com){
    // セリフ再生
    case "S":
            $("#serif").html(TRUE_SCENARIO[this.cursor].val);
            this.cursor++;
            break;
    // 背景変更
    case "BG":
            $("#mainScreen").css("background-image", TRUE_SCENARIO[this.cursor].val);
            this.cursor++;
            this.play();
            break;
        // キャラ表示
    case "PE":
        $("#serif").css("width", "450px");
        $("#chara").css("background", TRUE_SCENARIO[this.cursor].val);
        $("#chara").show();
        this.cursor++;
        this.play();
        break;
    // キャラ非表示
    case "PD":
        $("#serif").css("width", "600px");
        $("#chara").hide();
        this.cursor++;
        this.play();
        break;
    // アイテム表示
    case "IE":
        $("#item").css("background", TRUE_SCENARIO[this.cursor].val);
        $("#item").show();
        this.cursor++;
        this.play();
        break;
    // アイテム非表示
    case "ID":
        $("#item").hide();
        this.cursor++;
        this.play();
        break;
    // 背景変更
    case "BG":
        $("#mainScreen").css("background-image", TRUE_SCENARIO[this.cursor].val);
        this.cursor++;
        this.play();
        break;
    // SE再生
    case "SE":
        var au = $(TRUE_SCENARIO[this.cursor].val).get(0);
        au.play();
        this.cursor++;
        this.play();
        break;
    // 終了
    case "E":
            break;
    default:
            break;
    }
}

Novel.prototype.badScenario = function(){
    switch(BAD_SCENARIO[this.cursor].com){
    // セリフ再生
    case "S":
            $("#serif").html(BAD_SCENARIO[this.cursor].val);
            this.cursor++;
            break;
    // 背景変更
    case "BG":
            $("#mainScreen").css("background-image", BAD_SCENARIO[this.cursor].val);
            this.cursor++;
            this.play();
            break;
    // キャラ表示
    case "PE":
        $("#serif").css("width", "450px");
        $("#chara").css("background", BAD_SCENARIO[this.cursor].val);
        $("#chara").show();
        this.cursor++;
        this.play();
        break;
    // キャラ非表示
    case "PD":
        $("#serif").css("width", "600px");
        $("#chara").hide();
        this.cursor++;
        this.play();
        break;
    // アイテム表示
    case "IE":
        $("#item").css("background", BAD_SCENARIO[this.cursor].val);
        $("#item").show();
        this.cursor++;
        this.play();
        break;
    // アイテム非表示
    case "ID":
        $("#item").hide();
        this.cursor++;
        this.play();
        break;
    // 背景変更
    case "BG":
        $("#mainScreen").css("background-image", BAD_SCENARIO[this.cursor].val);
        this.cursor++;
        this.play();
        break;
    // SE再生
    case "SE":
        var au = $(BAD_SCENARIO[this.cursor].val).get(0);
        au.play();
        this.cursor++;
        this.play();
        break;
    // 終了
    case "E":
            break;
    }
}

Novel.prototype.deadScenario = function(){
    switch(DEAD_SCENARIO[this.cursor].com){
    // セリフ再生
    case "S":
        $("#serif").html(DEAD_SCENARIO[this.cursor].val);
        this.cursor++;
        break;
    // 背景変更
    case "BG":
        $("#mainScreen").css("background-image", DEAD_SCENARIO[this.cursor].val);
        this.cursor++;
        this.play();
        break;
    // キャラ表示
    case "PE":
        $("#serif").css("width", "450px");
        $("#chara").css("background", "url(image/chara/haunter.png)");
        $("#chara").show();
        this.cursor++;
        this.play();
        break;
    // キャラ非表示
    case "PD":
        $("#serif").css("width", "600px");
        $("#chara").hide();
        this.cursor++;
        this.play();
        break;
    // アイテム表示
    case "IE":
        $("#item").css("background", DEAD_SCENARIO[this.cursor].val);
        $("#item").show();
        this.cursor++;
        this.play();
        break;
    // アイテム非表示
    case "ID":
        $("#item").hide();
        this.cursor++;
        this.play();
        break;
    // 背景変更
    case "BG":
        $("#mainScreen").css("background-image", DEAD_SCENARIO[this.cursor].val);
        this.cursor++;
        this.play();
        break;
    // SE再生
    case "SE":
        var au = $(DEAD_SCENARIO[this.cursor].val).get(0);
        au.play();
        this.cursor++;
        this.play();
        break;

    // 終了
    case "E":
            break;
    }
}